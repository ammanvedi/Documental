/**
 * Created by ammanvedi on 25/01/2016.
 */

( function( Utils, State, config ) {

	Utils.ingest = function() {

		State.project = config && config.projectName ? config.projectName : "project";
		process.on('beforeExit', function(){
			if( !Utils.appBuilder.isBuilt() ) {
				Utils.exportDataToJSON();
			}
		});

		return modify( {
			fileModifier: function ( file, contents ) {
				return Utils.determineFunctions(file,  contents, acorn, walk );
			}
		} );
	};

} )( documentalCore.utils, documentalCore.state, config );