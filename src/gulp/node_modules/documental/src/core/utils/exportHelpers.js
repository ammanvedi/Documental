/**
 * Created by ammanvedi on 25/01/2016.
 */


( function( Utils, State, config ) {

	Utils.exportDataToJSON = function () {

		//var outPath = config && config.jsonOutput && !config.useApp ? process.cwd() + '/' + config.jsonOutput  : process.cwd() + '/';
		var outPath = config && config.jsonOutput && !config.useApp ? process.cwd() + '/' + config.jsonOutput  : State.docAppPath;

		if( config.useApp ) {
			Utils.appBuilder.build( "./node_modules/documental/app/dist", Utils.getProjectName(), config.port || 3000 );
		}

		fs.writeFileSync( outPath + Utils.getProjectName() + '-menuTree.json', Utils.makeMenuTree() );
		fs.writeFileSync( outPath + Utils.getProjectName() + '-sourcemap.json', Utils.getSourceMap() );
		fs.writeFileSync( outPath + Utils.getProjectName() + '-autocomplete.json', Utils.getAutocomplete() );
	};

} )( documentalCore.utils, documentalCore.state, config );